<!DOCTYPE html><html class=no-js lang=en> <head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="it slices, it dices, it connects EVERYTHING" name=description><meta content="Hugh Smalley" name=author><link href=https://hsmalley.github.io/how-to/SSH/ rel=canonical><link href=../Restic/ rel=prev><link href=../SVN/ rel=next><link href=../../assets/images/favicon.png rel=icon><meta content="mkdocs-1.4.2, mkdocs-material-9.1.4" name=generator><title>SSH - 🤓 🐐‍💨‍🎂</title><link href=../../assets/stylesheets/main.240905d7.min.css rel=stylesheet><link href=../../assets/stylesheets/palette.a0c5b2b5.min.css rel=stylesheet><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback" rel=stylesheet><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><meta content=website property=og:type><meta content="SSH - 🤓 🐐‍💨‍🎂" property=og:title><meta content="it slices, it dices, it connects EVERYTHING" property=og:description><meta content=https://hsmalley.github.io/assets/images/social/how-to/SSH.png property=og:image><meta content=image/png property=og:image:type><meta content=1200 property=og:image:width><meta content=630 property=og:image:height><meta content=https://hsmalley.github.io/how-to/SSH/ property=og:url><meta content=summary_large_image name=twitter:card><meta content="SSH - 🤓 🐐‍💨‍🎂" name=twitter:title><meta content="it slices, it dices, it connects EVERYTHING" name=twitter:description><meta content=https://hsmalley.github.io/assets/images/social/how-to/SSH.png name=twitter:image><link href=../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src=../../assets/javascripts/glightbox.min.js></script></head> <body data-md-color-accent=deep-orange data-md-color-primary=deep-orange data-md-color-scheme=default dir=ltr> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox> <input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a class=md-skip href=#ssh> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav aria-label=Header class="md-header__inner md-grid"> <a aria-label="🤓 🐐‍💨‍🎂" class="md-header__button md-logo" data-md-component=logo href=../.. title="🤓 🐐‍💨‍🎂"> <svg viewbox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="m64.7 125.8 53.2 31.9c7.8 4.7 17.8 2 22.2-5.9l77.5-139.7c3-5.4-.9-12.1-7.1-12.1-1.6 0-3.2.5-4.6 1.4l-142 97.4c-9.6 6.6-9.2 20.9.8 26.9zM32 171.7v123.6c0 8 10.4 11 14.7 4.4l60-92c5-7.6 2.6-17.8-5.2-22.5L56.2 158c-10.6-6.4-24.2 1.3-24.2 13.7zM326.4 12.1 404 151.7c4.4 7.9 14.5 10.6 22.2 5.9l53.2-31.9c10-6 10.4-20.3.8-26.9L338.1 1.4c-1.4-.9-3-1.4-4.6-1.4-6.2 0-10.1 6.7-7.1 12.1zM512 171.7c0-12.4-13.6-20.1-24.2-13.7l-45.3 27.2c-7.8 4.7-10.1 14.9-5.2 22.5l60 92c4.3 6.7 14.7 3.6 14.7-4.4V171.7zm-49.3 246-160.6 18.9c-8.1.9-14.1 7.8-14.1 15.9v52.8c0 3.7 3 6.8 6.8 6.8.8 0 1.6-.1 2.4-.4l172.7-64c6.1-2.2 10.1-8 10.1-14.5 0-9.3-8.1-16.5-17.3-15.4zM249.2 512c3.7 0 6.8-3 6.8-6.8v-52.6c0-8.1-6.1-14.9-14.1-15.9l-160.6-19c-9.2-1.1-17.3 6.1-17.3 15.4 0 6.5 4 12.3 10.1 14.5l172.7 64c.8.3 1.6.4 2.4.4zM57.7 382.9l170.9 20.2c7.8.9 13.4-7.5 9.5-14.3l-85.7-150c-5.9-10.4-20.7-10.8-27.3-.8L46.2 358.2c-6.5 9.9-.3 23.3 11.5 24.7zm439.6-24.8-78.4-120c-6.5-10-21.4-9.6-27.3.8l-85.4 149.6c-3.9 6.8 1.6 15.2 9.5 14.3l170.1-20c11.8-1.4 18-14.7 11.5-24.6zm-216.9 11 78.4-137.2c6.1-10.7-1.6-23.9-13.9-23.9H199.1c-12.3 0-20 13.3-13.9 23.9l78.4 137.2c3.7 6.4 13 6.4 16.7 0zm-90-193.1h163.2c12.2 0 19.9-13.1 14-23.8l-80-144c-2.8-5.1-8.2-8.2-14-8.2h-3.2c-5.8 0-11.2 3.2-14 8.2l-80 144c-5.9 10.7 1.8 23.8 14 23.8z"></path></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> 🤓 🐐‍💨‍🎂 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> SSH </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input aria-label="Switch to dark mode" class=md-option data-md-color-accent=deep-orange data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary=deep-orange data-md-color-scheme=default id=__palette_1 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_2 hidden title="Switch to dark mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg> </label> <input aria-label="Switch to light mode" class=md-option data-md-color-accent=deep-orange data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary=deep-orange data-md-color-scheme=slate id=__palette_2 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_1 hidden title="Switch to light mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input aria-label=Search autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query name=query placeholder=Search required spellcheck=false type=text> <label class="md-search__icon md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </label> <nav aria-label=Search class=md-search__options> <button aria-label=Clear class="md-search__icon md-icon" tabindex=-1 title=Clear type=reset> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a class=md-source data-md-component=source href=https://github.com/hsmalley/hsmalley title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg> </div> <div class=md-source__repository> hsmalley.github.io </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label=Navigation class="md-nav md-nav--primary" data-md-level=0> <label class=md-nav__title for=__drawer> <a aria-label="🤓 🐐‍💨‍🎂" class="md-nav__button md-logo" data-md-component=logo href=../.. title="🤓 🐐‍💨‍🎂"> <svg viewbox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="m64.7 125.8 53.2 31.9c7.8 4.7 17.8 2 22.2-5.9l77.5-139.7c3-5.4-.9-12.1-7.1-12.1-1.6 0-3.2.5-4.6 1.4l-142 97.4c-9.6 6.6-9.2 20.9.8 26.9zM32 171.7v123.6c0 8 10.4 11 14.7 4.4l60-92c5-7.6 2.6-17.8-5.2-22.5L56.2 158c-10.6-6.4-24.2 1.3-24.2 13.7zM326.4 12.1 404 151.7c4.4 7.9 14.5 10.6 22.2 5.9l53.2-31.9c10-6 10.4-20.3.8-26.9L338.1 1.4c-1.4-.9-3-1.4-4.6-1.4-6.2 0-10.1 6.7-7.1 12.1zM512 171.7c0-12.4-13.6-20.1-24.2-13.7l-45.3 27.2c-7.8 4.7-10.1 14.9-5.2 22.5l60 92c4.3 6.7 14.7 3.6 14.7-4.4V171.7zm-49.3 246-160.6 18.9c-8.1.9-14.1 7.8-14.1 15.9v52.8c0 3.7 3 6.8 6.8 6.8.8 0 1.6-.1 2.4-.4l172.7-64c6.1-2.2 10.1-8 10.1-14.5 0-9.3-8.1-16.5-17.3-15.4zM249.2 512c3.7 0 6.8-3 6.8-6.8v-52.6c0-8.1-6.1-14.9-14.1-15.9l-160.6-19c-9.2-1.1-17.3 6.1-17.3 15.4 0 6.5 4 12.3 10.1 14.5l172.7 64c.8.3 1.6.4 2.4.4zM57.7 382.9l170.9 20.2c7.8.9 13.4-7.5 9.5-14.3l-85.7-150c-5.9-10.4-20.7-10.8-27.3-.8L46.2 358.2c-6.5 9.9-.3 23.3 11.5 24.7zm439.6-24.8-78.4-120c-6.5-10-21.4-9.6-27.3.8l-85.4 149.6c-3.9 6.8 1.6 15.2 9.5 14.3l170.1-20c11.8-1.4 18-14.7 11.5-24.6zm-216.9 11 78.4-137.2c6.1-10.7-1.6-23.9-13.9-23.9H199.1c-12.3 0-20 13.3-13.9 23.9l78.4 137.2c3.7 6.4 13 6.4 16.7 0zm-90-193.1h163.2c12.2 0 19.9-13.1 14-23.8l-80-144c-2.8-5.1-8.2-8.2-14-8.2h-3.2c-5.8 0-11.2 3.2-14 8.2l-80 144c-5.9 10.7 1.8 23.8 14 23.8z"></path></svg> </a> 🤓 🐐‍💨‍🎂 </label> <div class=md-nav__source> <a class=md-source data-md-component=source href=https://github.com/hsmalley/hsmalley title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg> </div> <div class=md-source__repository> hsmalley.github.io </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../..> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2 type=checkbox> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> Blog <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../blog/IPFS%20Second%20Post/ class=md-nav__link> This is My Second IPFS Post </a> </li> <li class=md-nav__item> <a href=../../blog/Markdown%20Metadata/ class=md-nav__link> Markdown Metadata, its meta-tastic! </a> </li> <li class=md-nav__item> <a href=../../blog/ipfs-first-post/ class=md-nav__link> This is My First IPFS Post </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" id=__nav_3 type=checkbox> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> How to <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=true aria-labelledby=__nav_3_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> How to </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Ansible/ class=md-nav__link> Ansible </a> </li> <li class=md-nav__item> <a href=../Apptainer/ class=md-nav__link> Apptainer </a> </li> <li class=md-nav__item> <a href=../Bash/ class=md-nav__link> Bash </a> </li> <li class=md-nav__item> <a href=../FFMPEG/ class=md-nav__link> FFMPEG </a> </li> <li class=md-nav__item> <a href=../GIT/ class=md-nav__link> GIT </a> </li> <li class=md-nav__item> <a href=../HPC/ class=md-nav__link> HPC </a> </li> <li class=md-nav__item> <a href=../JSON/ class=md-nav__link> JSON </a> </li> <li class=md-nav__item> <a href=../LXC%20Image%20Creation/ class=md-nav__link> LXC - Image Creation </a> </li> <li class=md-nav__item> <a href=../Linux/ class=md-nav__link> Linux </a> </li> <li class=md-nav__item> <a href=../MDRAID/ class=md-nav__link> MDRAID </a> </li> <li class=md-nav__item> <a href=../MTR/ class=md-nav__link> MTR </a> </li> <li class=md-nav__item> <a href=../MySQL/ class=md-nav__link> MYSQL </a> </li> <li class=md-nav__item> <a href=../Podman/ class=md-nav__link> Containers </a> </li> <li class=md-nav__item> <a href=../Python/ class=md-nav__link> Python </a> </li> <li class=md-nav__item> <a href=../Restic/ class=md-nav__link> Restic </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" id=__toc type=checkbox> <label class="md-nav__link md-nav__link--active" for=__toc> SSH <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> SSH </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#creating-a-ssh-key> Creating a Ssh Key </a> <nav aria-label="Creating a Ssh Key" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#linux-macos> Linux / MacOS </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#putty> Putty </a> <nav aria-label=Putty class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#extracting-keys> Extracting Keys </a> <nav aria-label="Extracting Keys" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#public-key> Public Key </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#private-key> Private Key </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#convert-openssh-key-to-putty-key> Convert Openssh Key to Putty Key </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#tpm> TPM </a> <nav aria-label=TPM class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#getting-started> Getting Started </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#create-the-keys> Create the Keys </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#reading-the-public-key> Reading the Public Key </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#using-the-tpm-key> Using the TPM Key </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#using-your-ssh-key> Using Your SSH Key </a> <nav aria-label="Using Your SSH Key" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#agent-forwarding> Agent Forwarding </a> <nav aria-label="Agent Forwarding" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#ssh-agent-forwarding-via-sudo> SSH Agent Forwarding via Sudo </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#ssh-host-jumping> SSH Host Jumping </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#faster-ssh> Faster SSH </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#ssh-key-signing> SSH Key Signing </a> <nav aria-label="SSH Key Signing" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#signing-data> Signing Data </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#verifying-data> Verifying Data </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#code-signing> Code Signing </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#ssh-certificates> SSH Certificates </a> <nav aria-label="SSH Certificates" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#certificate-authority> Certificate Authority </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#host-certificates> Host Certificates </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#client-certificates> Client Certificates </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#congrats> Congrats </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#see-also> See Also </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../SVN/ class=md-nav__link> SVN </a> </li> <li class=md-nav__item> <a href=../TAR/ class=md-nav__link> TAR </a> </li> <li class=md-nav__item> <a href=../TMUX/ class=md-nav__link> TMUX </a> </li> <li class=md-nav__item> <a href=../Taskfile/ class=md-nav__link> Taskfile.yml </a> </li> <li class=md-nav__item> <a href=../VIM/ class=md-nav__link> VIM </a> </li> <li class=md-nav__item> <a href=../Warewulf/ class=md-nav__link> Warewulf </a> </li> <li class=md-nav__item> <a href=../Windows/ class=md-nav__link> Windows </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4 type=checkbox> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> Recipes <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_4_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Recipes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../recipes/Marry%20Me%20Chicken/ class=md-nav__link> Marry Me Chicken </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../blog/ class=md-nav__link> About Me </a> </li> <li class=md-nav__item> <a href=../../resume/ class=md-nav__link> Resume </a> </li> <li class=md-nav__item> <a href=../../tags/ class=md-nav__link> Tags </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#creating-a-ssh-key> Creating a Ssh Key </a> <nav aria-label="Creating a Ssh Key" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#linux-macos> Linux / MacOS </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#putty> Putty </a> <nav aria-label=Putty class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#extracting-keys> Extracting Keys </a> <nav aria-label="Extracting Keys" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#public-key> Public Key </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#private-key> Private Key </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#convert-openssh-key-to-putty-key> Convert Openssh Key to Putty Key </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#tpm> TPM </a> <nav aria-label=TPM class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#getting-started> Getting Started </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#create-the-keys> Create the Keys </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#reading-the-public-key> Reading the Public Key </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#using-the-tpm-key> Using the TPM Key </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#using-your-ssh-key> Using Your SSH Key </a> <nav aria-label="Using Your SSH Key" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#agent-forwarding> Agent Forwarding </a> <nav aria-label="Agent Forwarding" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#ssh-agent-forwarding-via-sudo> SSH Agent Forwarding via Sudo </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#ssh-host-jumping> SSH Host Jumping </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#faster-ssh> Faster SSH </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#ssh-key-signing> SSH Key Signing </a> <nav aria-label="SSH Key Signing" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#signing-data> Signing Data </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#verifying-data> Verifying Data </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#code-signing> Code Signing </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#ssh-certificates> SSH Certificates </a> <nav aria-label="SSH Certificates" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#certificate-authority> Certificate Authority </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#host-certificates> Host Certificates </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#client-certificates> Client Certificates </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#congrats> Congrats </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#see-also> See Also </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <nav class=md-tags> <a class=md-tag href=../../tags/#ssh>ssh</a> <a class=md-tag href=../../tags/#putty>putty</a> <a class=md-tag href=../../tags/#winget>winget</a> <a class=md-tag href=../../tags/#git>git</a> </nav> <h1 id=ssh>SSH</h1> <h2 id=creating-a-ssh-key>Creating a Ssh Key</h2> <h3 id=linux-macos>Linux / MacOS</h3> <div class="admonition example"> <p class=admonition-title>Example</p> <div class="language-shell highlight"><pre><span></span><code><span id=__span-0-1><a href=#__codelineno-0-1 id=__codelineno-0-1 name=__codelineno-0-1></a>ssh-keygen<span class=w> </span>-t<span class=w> </span>ed25519<span class=w> </span>-C<span class=w> </span><span class=s2>"userid and/or email here"</span>
</span></code></pre></div> </div> <p>Once your key is created you should find it located in <code>~/.ssh</code> using the default options it the path would be <code>~/.ssh/id_ed25519</code> for the private key and <code>~/.ssh/id_ed25519.pub</code> for the public key.</p> <h3 id=putty>Putty</h3> <div class="admonition attention"> <p class=admonition-title>Attention: </p> <p>Make sure you have putty installed for this to work.<br> If you do not have it installed use the package manager of your choice</p> <blockquote> <p>[!example] Using winget to install Putty</p> <p><div class="language-text highlight"><pre><span></span><code><span id=__span-1-1><a href=#__codelineno-1-1 id=__codelineno-1-1 name=__codelineno-1-1></a>winget install -e --id PuTTY.PuTTY
</span></code></pre></div><br> </p> </blockquote> </div> <blockquote></blockquote> <div class="admonition example"> <p class=admonition-title>Creating a new putty key</p> <div class="language-shell highlight"><pre><span></span><code><span id=__span-2-1><a href=#__codelineno-2-1 id=__codelineno-2-1 name=__codelineno-2-1></a>puttygen<span class=w> </span>-t<span class=w> </span>ed25519<span class=w> </span>-C<span class=w> </span><span class=s2>"userid and/or email here"</span><span class=w> </span>-o<span class=w> </span>putty_key.ppk
</span></code></pre></div> </div> <h4 id=extracting-keys>Extracting Keys</h4> <p>To use your putty key on without putty you will need to extract the keys. Keep track of where you extra the key too and the file names created, you will need this information later. Also treat these keys like you would a password, they're sensitive information that needs to be protected.</p> <h5 id=public-key>Public Key</h5> <p>To get your public key from your putty key you will need to extract it</p> <div class="admonition example"> <p class=admonition-title>Extracting Public Key</p> <div class="language-shell highlight"><pre><span></span><code><span id=__span-3-1><a href=#__codelineno-3-1 id=__codelineno-3-1 name=__codelineno-3-1></a>puttygen<span class=w> </span>putty_key.ppk<span class=w> </span>-O<span class=w> </span>public-openssh<span class=w> </span>-o<span class=w> </span>putty_key.pub
</span></code></pre></div> </div> <h5 id=private-key>Private Key</h5> <p>To get your private key from your putty key you will need to extract it</p> <div class="admonition example"> <p class=admonition-title>Extracting Private Key</p> <div class="language-shell highlight"><pre><span></span><code><span id=__span-4-1><a href=#__codelineno-4-1 id=__codelineno-4-1 name=__codelineno-4-1></a>puttygen<span class=w> </span>putty_key.ppk<span class=w> </span>-O<span class=w> </span>private-openssh<span class=w> </span>-o<span class=w> </span>putty_key
</span></code></pre></div> </div> <h4 id=convert-openssh-key-to-putty-key>Convert Openssh Key to Putty Key</h4> <p>To convert an openssh key to putty key you will need the private key file as well as any passwords that may or may not be securing that key. This will most likely not apply to anyone unless they want to take an existing key and use in putty</p> <div class="admonition example"> <p class=admonition-title>Converting the key</p> <div class="language-shell highlight"><pre><span></span><code><span id=__span-5-1><a href=#__codelineno-5-1 id=__codelineno-5-1 name=__codelineno-5-1></a>puttygen<span class=w> </span>id_ed25519<span class=w> </span>-o<span class=w> </span>putty_key.ppk
</span></code></pre></div> </div> <h3 id=tpm>TPM</h3> <div class="admonition note"> <p class=admonition-title>WIP</p> </div> <h4 id=getting-started>Getting Started</h4> <p>Check to see if you have <code>/dev/tpm0</code> on your system. If you do make sure you have tpm2-pkcs11 installed. This is needed to act as a smart card interface. This will allow us to generate and store the private key in the TPM. Making it way more secure than just leaving a private key in your ~/.ssh directory.</p> <p>Next check the group on <code>/dev/tpmrm0</code> and add that group to your user, most likely it will be <code>tss</code> so do <code>sudo usermod -a -G tss "$(whoami)"</code> and then relogin.</p> <h4 id=create-the-keys>Create the Keys</h4> <div class="language-text highlight"><pre><span></span><code><span id=__span-6-1><a href=#__codelineno-6-1 id=__codelineno-6-1 name=__codelineno-6-1></a>tpm2_ptool init
</span><span id=__span-6-2><a href=#__codelineno-6-2 id=__codelineno-6-2 name=__codelineno-6-2></a>tpm2_ptool addtoken --pid=1 --label=ssh --userpin=PASSWORDHERE --sopin=RECOVERYPASSWORDHERE
</span><span id=__span-6-3><a href=#__codelineno-6-3 id=__codelineno-6-3 name=__codelineno-6-3></a>tpm2_ptool addkey --label=ssh --userpin=PASSWORD --algorithm=ecc256
</span></code></pre></div> <h4 id=reading-the-public-key>Reading the Public Key</h4> <div class="language-text highlight"><pre><span></span><code><span id=__span-7-1><a href=#__codelineno-7-1 id=__codelineno-7-1 name=__codelineno-7-1></a>ssh-keygen -D /usr/lib/x86_64-linux-gnu/libtpm2_pkcs11.so | tee ~/.ssh/id_tpm.pub
</span></code></pre></div> <p>Take the output from here and add that to the authorized keys file on whatever system you need to connect to.</p> <h4 id=using-the-tpm-key>Using the TPM Key</h4> <p>You'll need to point ssh to the identiy file that is the tpm using <code>-I /usr/lib/x86_64-linux-gnu/libtpm2_pkcs11.so</code>. This is easier done in your <code>~/.ssh/config</code> file. To set it for everything add this at the bottom of your config</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-8-1><a href=#__codelineno-8-1 id=__codelineno-8-1 name=__codelineno-8-1></a> Host *
</span><span id=__span-8-2><a href=#__codelineno-8-2 id=__codelineno-8-2 name=__codelineno-8-2></a>   PKCS11Provider /usr/lib/x86_64-linux-gnu/libtpm2_pkcs11.so
</span></code></pre></div> <h2 id=using-your-ssh-key>Using Your SSH Key</h2> <p>To use your key, simply ssh to a server. It should instantly allow you in without prompting. Putty users will have to enter their user name depending on how they have their connection configured.</p> <div class="admonition note"> <p class=admonition-title> </p> <p>If you're having problems you may need to add the keys to your ssh-agent. <code>ssh-agent -a ~/.ssh/id_ed25519</code><br> Putty should do this for you, you may have to go into the connection settings and tell it to use the key. I believe moba works the same way.</p> </div> <h3 id=agent-forwarding>Agent Forwarding</h3> <div class="admonition tip"> <p class=admonition-title> </p> <p>For MacOS you will need to do <code>ssh-add --apple-use-keychain</code> to add your keys to the keychain for Agent Forwarding to work correctly</p> </div> <p>When you use agent forwarding it will allow your keys to be used on a remote system that you're connected too. You do this with the <code>-A</code> flag so <code>ssh -A user@host</code> however you can configure your ssh config to do this for you automatically. Make sure you place this at the <strong>END</strong> of your config</p> <div class="admonition example"> <p class=admonition-title> </p> <p><code>~/.ssh/config</code></p> <div class="language-text highlight"><pre><span></span><code><span id=__span-9-1><a href=#__codelineno-9-1 id=__codelineno-9-1 name=__codelineno-9-1></a>host *
</span><span id=__span-9-2><a href=#__codelineno-9-2 id=__codelineno-9-2 name=__codelineno-9-2></a> Compression yes
</span><span id=__span-9-3><a href=#__codelineno-9-3 id=__codelineno-9-3 name=__codelineno-9-3></a> StrictHostKeyChecking no
</span><span id=__span-9-4><a href=#__codelineno-9-4 id=__codelineno-9-4 name=__codelineno-9-4></a> ForwardAgent yes
</span></code></pre></div> </div> <p><code>host *</code> says use these options on anything that matches. This is why we put it at the bottom of <code>~/.ssh/confg</code> because it works on a first match priceable. <code>compression yes</code> means that it will use compression, this is helpful for low-bandwidth connections and data transfers. <code>StrictHostKeyChecking no</code> says don't alert me to accept keys. Not a great idea for most things, but not something we can avoid with our current setup. <code>ForwardAgent yes</code> means that it will forward the ssh-agent to the destination connection. This is the main thing we want, the other options are helpful but not required.</p> <h4 id=ssh-agent-forwarding-via-sudo>SSH Agent Forwarding via Sudo</h4> <p>Now that you're forwarding your agent and you're able to ssh into other systems from the system you're connected to, let's assume you need to become root or another user. To do this you will need to forward your shell and environment. Do do this you will do <code>sudo -E -s</code> or <code>sudo -E -s -u username</code>. this will allow you to forward your agent from your system, to a remote system, over sudo, and use your keys that way. The <code>-E</code> flag forwards your environment and the <code>-s</code> forwards your shell.</p> <p>This example forwards your agent, connects to a host, then drops you into root with your agent forwarded</p> <div class="language-shell highlight"><pre><span></span><code><span id=__span-10-1><a href=#__codelineno-10-1 id=__codelineno-10-1 name=__codelineno-10-1></a>ssh<span class=w> </span>-A<span class=w> </span>user@hostname
</span><span id=__span-10-2><a href=#__codelineno-10-2 id=__codelineno-10-2 name=__codelineno-10-2></a>sudo<span class=w> </span>-E<span class=w> </span>-s
</span></code></pre></div> <h3 id=ssh-host-jumping>SSH Host Jumping</h3> <p>To use another host as a jumpbox you have to use the <code>-J</code> flag. You can combine this with the <code>-A</code> to forward your agent too.</p> <div class="language-shell highlight"><pre><span></span><code><span id=__span-11-1><a href=#__codelineno-11-1 id=__codelineno-11-1 name=__codelineno-11-1></a><span class=c1># Use a system to connect to another system</span>
</span><span id=__span-11-2><a href=#__codelineno-11-2 id=__codelineno-11-2 name=__codelineno-11-2></a>ssh<span class=w> </span>-J<span class=w> </span>user@jump-box<span class=w> </span>user@destination-server
</span><span id=__span-11-3><a href=#__codelineno-11-3 id=__codelineno-11-3 name=__codelineno-11-3></a><span class=c1># Jump from jumpbox to jumpbox2 to jumpbox3 to destination</span>
</span><span id=__span-11-4><a href=#__codelineno-11-4 id=__codelineno-11-4 name=__codelineno-11-4></a>ssh<span class=w> </span>-J<span class=w> </span>user@jumpbox,user@jumpbox2,user@jumpbox3<span class=w> </span>user@destination
</span></code></pre></div> <p>If you're forwarding your agent and your public key is on the various servers you can jump to all of them adding the <code>-A</code> flag.</p> <h3 id=faster-ssh>Faster SSH</h3> <p>Getting faster ssh connections is simple and easy, you can use the ControlMaster option!</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-12-1><a href=#__codelineno-12-1 id=__codelineno-12-1 name=__codelineno-12-1></a>host *
</span><span id=__span-12-2><a href=#__codelineno-12-2 id=__codelineno-12-2 name=__codelineno-12-2></a>  ControlMaster auto
</span><span id=__span-12-3><a href=#__codelineno-12-3 id=__codelineno-12-3 name=__codelineno-12-3></a>  ControlPath ~/.ssh/sockets/%r@%h-%p
</span><span id=__span-12-4><a href=#__codelineno-12-4 id=__codelineno-12-4 name=__codelineno-12-4></a>  ControlPersist 600
</span></code></pre></div> <p>This tells ssh to use a socket to reconnect to ssh and hold it open for 600 seconds. This is really helpful if you're bouncing around to different systems and have to reconnect to them. It can cause some problems if you're opening a lot of connections at once. In practice I've only hit a problem a handful of times though and I make A LOT of connections via ssh. So YMMV. If you have problems just remove, comment out, or place it on specific connections rather than all (<code>*</code>) connections</p> <h2 id=ssh-key-signing>SSH Key Signing</h2> <h3 id=signing-data>Signing Data</h3> <p>Now let's take a step further! How about signing files, data, etc? You can do that with your ssh key! Why would you want to do this? You can ensure data integrity and prove that the data came from you.</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-13-1><a href=#__codelineno-13-1 id=__codelineno-13-1 name=__codelineno-13-1></a>ssh-keygen<span class=w> </span>-Y<span class=w> </span>sign<span class=w> </span>-f<span class=w> </span>~/.ssh/id_ed25519<span class=w> </span>-n<span class=w> </span>file<span class=w> </span>FILENAMEHERE
</span></code></pre></div> <p>So lets break this down <code>-Y sign</code> is telling it that you're going to sign something, then comes the path to your private key, next is the name space, since we're signing a file we tell it <code>-n file</code>.</p> <h3 id=verifying-data>Verifying Data</h3> <p>Okay, so we signed a file, but how do we verify it?</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-14-1><a href=#__codelineno-14-1 id=__codelineno-14-1 name=__codelineno-14-1></a>ssh-keygen<span class=w> </span>-Y<span class=w> </span>verify<span class=w> </span>-f<span class=w> </span>allowed_signers<span class=w> </span>-I<span class=w> </span>hugh.smalley@lexisnexisrisk.com<span class=w> </span>-n<span class=w> </span>file<span class=w> </span>-s<span class=w> </span>FILENAMEHERE.sig<span class=w> </span>&lt;FILENAMEHERE
</span></code></pre></div> <p>Just like signing <code>-Y verify</code> is telling it that we want to verify something. <code>-f allow_signers</code> is telling it the name of the file with the information to lookup public keys. Much like the authorized_keys file lets ssh know they's keys are allowed to connect.</p> <p>For example here's my keys in the allowed_signers file.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-15-1><a href=#__codelineno-15-1 id=__codelineno-15-1 name=__codelineno-15-1></a>hugh.smalley@lexisnexisrisk.com sk-ssh-ed25519@openssh.com AAAAGnNrLXNzaC1lZDI1NTE5QG9wZW5zc2guY29tAAAAIPEroRTKtLMu9EXxFXXNm8bzA1w/c4v7gFKeFPXmHII1AAAABHNzaDo= Yubikey 5
</span><span id=__span-15-2><a href=#__codelineno-15-2 id=__codelineno-15-2 name=__codelineno-15-2></a>hugh.smalley@lexisnexisrisk.com ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIFuAYj8uDz7o5qJzHrEohvfpX/RWBoqudHRoaD+6dR+X Macbook Pro
</span></code></pre></div> <p>The first section is a comma delineated list of identifiers eg email addresses. The next section is the type of key, eg ssh-ed25519, ssh-rsa, etc. Lastly the public key.</p> <p>To continue the <code>-I</code> says the name of the identity to check in the allowed_signers file.<code>-n file</code> is again the name space, <code>-s</code>is the signature file and <code>&lt;FILENAMEHERE</code>is the file we're checking.</p> <p>You can wrap this up in some functions to throw into your .bashrc,.zshrc,etc..</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-16-1><a href=#__codelineno-16-1 id=__codelineno-16-1 name=__codelineno-16-1></a>ssh_sign<span class=w> </span><span class=o>()</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-16-2><a href=#__codelineno-16-2 id=__codelineno-16-2 name=__codelineno-16-2></a><span class=w>  </span>ssh-keygen<span class=w> </span>-Y<span class=w> </span>sign<span class=w> </span>-f<span class=w> </span>~/.ssh/id_ed25519<span class=w> </span>-n<span class=w> </span>file<span class=w> </span><span class=s2>"</span><span class=si>${</span><span class=nv>1</span><span class=si>}</span><span class=s2>"</span>
</span><span id=__span-16-3><a href=#__codelineno-16-3 id=__codelineno-16-3 name=__codelineno-16-3></a><span class=o>}</span>
</span><span id=__span-16-4><a href=#__codelineno-16-4 id=__codelineno-16-4 name=__codelineno-16-4></a>
</span><span id=__span-16-5><a href=#__codelineno-16-5 id=__codelineno-16-5 name=__codelineno-16-5></a>ssh_verify<span class=w> </span><span class=o>()</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-16-6><a href=#__codelineno-16-6 id=__codelineno-16-6 name=__codelineno-16-6></a><span class=w>  </span>ssh-keygen<span class=w> </span>-Y<span class=w> </span>verify<span class=w> </span>-f<span class=w> </span>allowed_signers<span class=w> </span>-I<span class=w> </span><span class=s2>"</span><span class=si>${</span><span class=nv>1</span><span class=si>}</span><span class=s2>"</span><span class=w> </span>-n<span class=w> </span>file<span class=w> </span>-s<span class=w> </span><span class=s2>"</span><span class=si>${</span><span class=nv>2</span><span class=si>}</span><span class=s2>.sig"</span><span class=w> </span>&lt;<span class=s2>"</span><span class=si>${</span><span class=nv>2</span><span class=si>}</span><span class=s2>"</span>
</span><span id=__span-16-7><a href=#__codelineno-16-7 id=__codelineno-16-7 name=__codelineno-16-7></a><span class=o>}</span>
</span></code></pre></div> <h3 id=code-signing>Code Signing</h3> <p>Now configure git so it knows about your signing key</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-17-1><a href=#__codelineno-17-1 id=__codelineno-17-1 name=__codelineno-17-1></a>git<span class=w> </span>config<span class=w> </span>--global<span class=w> </span>gpg.format<span class=w> </span>ssh
</span><span id=__span-17-2><a href=#__codelineno-17-2 id=__codelineno-17-2 name=__codelineno-17-2></a>git<span class=w> </span>config<span class=w> </span>--global<span class=w> </span>user.signingkey<span class=w> </span><span class=s2>"</span><span class=si>${</span><span class=nv>HOME</span><span class=si>}</span><span class=s2>/.ssh/id_ed25519.pub"</span>
</span></code></pre></div> <p>Now when you commit on git add a -S to sign it!</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-18-1><a href=#__codelineno-18-1 id=__codelineno-18-1 name=__codelineno-18-1></a>git<span class=w> </span>commit<span class=w> </span>-Sam<span class=w> </span><span class=s2>"Adding, Signing, and Commenting!"</span>
</span></code></pre></div> <p>If you want to skip adding the S then set:</p> <div class="language-Shell highlight"><pre><span></span><code><span id=__span-19-1><a href=#__codelineno-19-1 id=__codelineno-19-1 name=__codelineno-19-1></a>git<span class=w> </span>config<span class=w> </span>--global<span class=w> </span>commit.gpgsign<span class=w> </span><span class=nb>true</span>
</span></code></pre></div> <p>Now you can sign commits and other data with ssh!</p> <h2 id=ssh-certificates>SSH Certificates</h2> <div class="admonition note"> <p class=admonition-title>WIP</p> </div> <h3 id=certificate-authority>Certificate Authority</h3> <div class="admonition note"> <p class=admonition-title>WIP</p> </div> <h3 id=host-certificates>Host Certificates</h3> <div class="admonition note"> <p class=admonition-title>WIP</p> </div> <h3 id=client-certificates>Client Certificates</h3> <div class="admonition note"> <p class=admonition-title>WIP</p> </div> <h2 id=congrats>Congrats</h2> <p><img alt=⭐ class=twemoji src=https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/2b50.svg title=:star:> you did it!</p> <h2 id=see-also>See Also</h2> <div class="admonition seealso"> <p class=admonition-title> </p> <p><a href=https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent>Github has a guide</a> for creating, using, and adding ssh keys. I suggest you read that if you want to know more or add your keys to github.<br> <a href=https://blog.ledger.com/ssh-with-tpm/ >Ledger's guide to TPM2 on Debian</a> is really good and provided a lot of information on how to do TPM ssh<br> <a href=https://pandasauce.org/post/how-i-picked-set-up-smartcard/ >Pandasauce</a> guide on smart cards</p> </div> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright © 2023 Hugh Smalley </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ rel=noopener target=_blank> Material for MkDocs </a> </div> <div class=md-social> <a class=md-social__link href=https://github.com/hsmalley rel=noopener target=_blank title=github.com> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM277.3 415.7c-8.4 1.5-11.5-3.7-11.5-8 0-5.4.2-33 .2-55.3 0-15.6-5.2-25.5-11.3-30.7 37-4.1 76-9.2 76-73.1 0-18.2-6.5-27.3-17.1-39 1.7-4.3 7.4-22-1.7-45-13.9-4.3-45.7 17.9-45.7 17.9-13.2-3.7-27.5-5.6-41.6-5.6-14.1 0-28.4 1.9-41.6 5.6 0 0-31.8-22.2-45.7-17.9-9.1 22.9-3.5 40.6-1.7 45-10.6 11.7-15.6 20.8-15.6 39 0 63.6 37.3 69 74.3 73.1-4.8 4.3-9.1 11.7-10.6 22.3-9.5 4.3-33.8 11.7-48.3-13.9-9.1-15.8-25.5-17.1-25.5-17.1-16.2-.2-1.1 10.2-1.1 10.2 10.8 5 18.4 24.2 18.4 24.2 9.7 29.7 56.1 19.7 56.1 19.7 0 13.9.2 36.5.2 40.6 0 4.3-3 9.5-11.5 8-66-22.1-112.2-84.9-112.2-158.3 0-91.8 70.2-161.5 162-161.5S388 165.6 388 257.4c.1 73.4-44.7 136.3-110.7 158.3zm-98.1-61.1c-1.9.4-3.7-.4-3.9-1.7-.2-1.5 1.1-2.8 3-3.2 1.9-.2 3.7.6 3.9 1.9.3 1.3-1 2.6-3 3zm-9.5-.9c0 1.3-1.5 2.4-3.5 2.4-2.2.2-3.7-.9-3.7-2.4 0-1.3 1.5-2.4 3.5-2.4 1.9-.2 3.7.9 3.7 2.4zm-13.7-1.1c-.4 1.3-2.4 1.9-4.1 1.3-1.9-.4-3.2-1.9-2.8-3.2.4-1.3 2.4-1.9 4.1-1.5 2 .6 3.3 2.1 2.8 3.4zm-12.3-5.4c-.9 1.1-2.8.9-4.3-.6-1.5-1.3-1.9-3.2-.9-4.1.9-1.1 2.8-.9 4.3.6 1.3 1.3 1.8 3.3.9 4.1zm-9.1-9.1c-.9.6-2.6 0-3.7-1.5s-1.1-3.2 0-3.9c1.1-.9 2.8-.2 3.7 1.3 1.1 1.5 1.1 3.3 0 4.1zm-6.5-9.7c-.9.9-2.4.4-3.5-.6-1.1-1.3-1.3-2.8-.4-3.5.9-.9 2.4-.4 3.5.6 1.1 1.3 1.3 2.8.4 3.5zm-6.7-7.4c-.4.9-1.7 1.1-2.8.4-1.3-.6-1.9-1.7-1.5-2.6.4-.6 1.5-.9 2.8-.4 1.3.7 1.9 1.8 1.5 2.6z"></path></svg> </a> <a class=md-social__link href=https://gitlab.com/hsmalley rel=noopener target=_blank title=gitlab.com> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M48 32h352c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V80c0-26.5 21.5-48 48-48zm334.1 192.9-44.6-116.4c-.9-2.3-2.6-4.3-4.6-5.6-1.6-1-3.4-1.6-5.2-1.8-1.8-.2-3.7.1-5.4.7-1.7.7-3.3 1.7-4.5 3.1-1.2 1.4-2.1 3-2.6 4.8L285 201.9H162.1l-29.2-92.2c-.5-1.8-1.5-3.4-2.7-4.8-2.1-1.3-2.8-2.4-4.5-3-2.6-.7-3.6-1.8-5.4-.8-1.8.2-3.6.8-5.2 1.8-2 1.3-3.6 3.3-4.5 5.6L65.94 224.9l-.47 1.2a82.94 82.94 0 0 0-2.25 52.5c4.96 17.3 15.4 32.5 29.75 43.3l.17.1.38.3 67.88 50.9 54.2 40.9c1.5 1 5.3 2.8 8.3 2.8 3 0 6-1.8 8.4-2.8l54.1-40.9 68.4-51.2.2-.1c14.4-10.9 24.8-26.1 29.8-43.3 4.9-17.3 3.3-35.7-2.3-52.5l-.4-1.2z"></path></svg> </a> <a class=md-social__link href=https://linkedin.com/in/hsmalley rel=noopener target=_blank title=linkedin.com> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.copy", "content.code.annotate", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.19047be9.min.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body> </html>